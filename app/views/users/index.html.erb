<div class="container">
  <div class="users-index-h1">
  <h1 class="mt-4 mb-4">Find your colleagues</h1>
  <%= link_to "Back to the map", cities_path, class: "btn btn-outline-dark" %>
  </div>
  <%# SEARCH AND FILTERS %>

  <div class="filters mt-4">
    <%= form_with url: users_path, method: :get, class: "d-flex mb-5" do |f| %>
      <%= f.date_field :date, html5: true, value: params[:date], class: "form-control" %>
      <%= f.select :city, City.all.collect { |c| [ c.name ] }, class: "custom-select", selected: params[:city], include_blank: "city" %>
      <%= f.select :job_title, User.all.collect { |u| [ u.job_title ] }.uniq, class: "custom-select", selected: params[:job_title], include_blank: "job title" %>
      <%= f.select :department, User.all.collect { |u| [ u.department ] }.uniq, class: "custom-select", selected: params[:department], include_blank: "department" %>
      <%= f.select :languages, ["English", "French", "Hebrew", "Russian", "Spanish", "Scots"], class: "custom-select", selected: params[:languages], include_blank: "languages" %>
      <%= submit_tag "Search", class: "btn btn-dark" %>
    <% end %>
  </div>
  <%# CARDS %>
  <div class="row">
  <% @users.each do |user| %>
    <div class="col-lg-3">
      <div class="card-user">
        <%= cl_image_tag user.photo.key %>
        <div class="card-user-infos">
          <h2><%= user.first_name %> <%= user.last_name %></h2>
          <p><%= user.job_title %> (<%= user.department %>)</p>
          <p>
            <i class="fa-solid fa-map-pin"></i>
            <% if params[:date].present? %>
              Will be in: <%= user.current_city(params[:date]).name %>
            <% else %>
              Based in: <%= user.city.name %>
            <% end %>
          </p>
        </div>
      </div>
    </div>
  <% end %>
  </div>
</div>
