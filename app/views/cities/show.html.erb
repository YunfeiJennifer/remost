<div class="city-tip-div">
<p>Meet your colleagues in <span><%= @city.name %></span> </p>
<%= link_to "Add a tip", new_city_tip_path(@city), class: "btn btn-dark btn-sm" %>
</div>

<div class="map-filters">
    <%= form_with url: city_path(@city), method: :get do |f| %>
      <div class="input-div"><i class="fa-solid fa-calendar-days"></i><%= f.date_field :date, html5: true, value: params[:date].present? ? params[:date] : Date.today, class: "date-field" %></div>
      <div class="input-div"><i class="fa-sharp fa-solid fa-user-tie"></i><%= f.select :job_title, User.all.collect { |u| [ u.job_title ] }.uniq, class: "custom-select", selected: params[:job_title], include_blank: "job title" %></div>
      <div class="input-div"><i class="fa-sharp fa-solid fa-briefcase"></i><%= f.select :department, User.all.collect { |u| [ u.department ] }.uniq, class: "custom-select", selected: params[:department], include_blank: "department" %></div>
      <div class="input-div"><i class="fa-solid fa-language"></i><%= f.select :languages, ["English", "French", "Hebrew", "Russian", "Spanish", "Scots"], class: "custom-select mb-3", selected: params[:languages], include_blank: "languages" %></div>
      <%= f.submit "Search", class: "btn btn-dark" %>
    <% end %>
    <%= link_to "Back to World Map", cities_path, class: "btn btn-dark btn-city-map" %>
</div>

<div style="width: 100%; height: 100vh;"
  data-controller="city"
  data-city-tips-markers-value="<%= @tips_markers.to_json %>"
  data-city-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
</div>


<div style="carousel">
  <div id="carouselCityUsers" class="carousel slide" data-ride="carousel">

    <div class="carousel-inner">

      <div class="cards-wrapper">
      <% @teammates.each do |t| %>
      <% if t.current_city(@date) == @city %>
        <div class="card">
              <div class="card-body">
                <%= cl_image_tag t.photo.key, class: "avatar-small-carousel" %>
                <h6 class="card-title"><%= t.first_name %> <%= t.last_name %></h5>
                <p>From <%= t.city.name %></p>
                <a href="#" class="btn btn-dark">Bookmark</a>
              </div>
        </div>
      <% end %>
      <% end %>

    </div>

    <a class="carousel-control-prev" href="#carouselCityUsers" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselCityUsers" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>

  </div>

</div>
