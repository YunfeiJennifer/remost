<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<title>ReMost | Colleagues & Tips in <%= @city.name %></title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="">
<style>
</style>
<script src=""></script>

<body>

<div class="city-tip-div">
<p>Meet your colleagues in <span><%= @city.name %></span> </p>
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
  Add a tip!
</button>
</div>

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="container">
          <h1 class="mt-5">Add a tip</h1>
          <%= simple_form_for [@city, @tip] do |f| %>
            <%= f.input :name %>
            <%= f.input :location %>
            <%= f.input :content %>
            <%= f.input :rating, input_html: { min: 0, max: 10 } %>
            <%= f.input :category, :collection => ["cafes/restaurants", "co-working spaces", "bars", "sights", "safety", "other" ] %>
            <%= f.submit "Submit a tip", class: "btn btn-dark" %>
          <% end %>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>

<div class="map-filters">
    <%= form_with url: city_path(@city), method: :get do |f| %>
      <div class="input-div"><i class="fa-solid fa-calendar-days"></i><%= f.date_field :date, html5: true, value: params[:date].present? ? params[:date] : Date.today, class: "date-field" %></div>
      <div class="input-div"><i class="fa-sharp fa-solid fa-user-tie"></i><%= f.select :job_title, User.all.collect { |u| [ u.job_title ] }.uniq, class: "custom-select", selected: params[:job_title], include_blank: "job title" %></div>
      <div class="input-div"><i class="fa-sharp fa-solid fa-briefcase"></i><%= f.select :department, User.all.collect { |u| [ u.department ] }.uniq, class: "custom-select", selected: params[:department], include_blank: "department" %></div>
      <div class="input-div"><i class="fa-solid fa-language"></i><%= f.select :languages, ["English", "French", "Hebrew", "Russian", "Spanish", "Scots"], class: "custom-select mb-3", selected: params[:languages], include_blank: "languages" %></div>
      <%= f.submit "Search", class: "btn btn-dark" %>
    <% end %>
    <%= link_to "Back to World Map", cities_path, class: "btn btn-dark btn-city-map" %>
</div>

<div style="width: 100%; height: 100vh;"
  data-controller="city"
  data-city-tips-markers-value="<%= @tips_markers.to_json %>"
  data-city-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
</div>


<div style="carousel">
  <div id="carouselCityUsers" class="carousel slide" data-ride="carousel">

    <div class="carousel-inner">

      <div class="cards-wrapper">
      <% @teammates.each do |t| %>
      <% if t.current_city(@date) == @city %>
        <div class="card">
              <div class="card-body">
                <%= cl_image_tag t.photo.key, class: "avatar-small-carousel" %>
                <h6 class="card-title"><%= t.first_name %> <%= t.last_name %></h5>
                <p>From <%= t.city.name %></p>
                <a href="#" class="btn btn-dark">Bookmark</a>
              </div>
        </div>
      <% end %>
      <% end %>

    </div>

    <a class="carousel-control-prev" href="#carouselCityUsers" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselCityUsers" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>

  </div>

</div>


</body>
</html>
